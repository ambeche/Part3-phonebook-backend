{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["PersonForm","handlers","addPerson","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","value","onChange","type","Person","name","number","capitalizeName","handleDelete","onClick","Persons","lstToDisplay","map","p","key","id","Filter","handleSearch","searchText","Notification","notice","messageStyle","color","background","fontSize","border","borderRadius","padding","marginBottom","toggleStyle","code","message","style","baseUrl","Header","text","App","useState","persons","setPersons","setNewName","setNewNumber","setSearchText","setNotice","useEffect","axios","get","then","res","data","initPersons","console","log","catch","e","str","trim","split","toUpperCase","slice","join","notifyUser","newValue","setTimeout","errorHandler","err","response","newNotice","error","length","filter","toLowerCase","includes","preventDefault","newPerson","personByName","find","changedNumber","window","confirm","put","updatePerson","updatedContact","updateContactNumber","post","createPerson","concat","noticObject","target","person","delete","deletePerson","statusText","status","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.88b9f2f9.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = ({ handlers }) => {\r\n  const [addPerson, handleNameChange, handleNumberChange, newName, newNumber] = handlers;\r\n  return (\r\n    <div>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n            number: <input  value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Person = ({ name, number, capitalizeName, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      {capitalizeName(name)} {number}\r\n      <button onClick={handleDelete}>delete</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Persons = ({ lstToDisplay, capitalizeName, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      {lstToDisplay.map((p) => (\r\n        <Person\r\n          key={p.name}\r\n          name={p.name}\r\n          number={p.number}\r\n          capitalizeName={capitalizeName}\r\n          handleDelete={handleDelete(p.id)}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ handleSearch, searchText }) => {\r\n  return (\r\n    <>\r\n      <div>\r\n        Filter by name: <input type=\"search\" value={searchText} onChange={handleSearch} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ notice }) => {\r\n  const messageStyle = {\r\n    color: \"green\",\r\n    background: \"lightgrey\",\r\n    fontSize: 20,\r\n    border: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10,\r\n  };\r\n  const toggleStyle = notice.code\r\n    ? messageStyle\r\n    : { ...messageStyle, color: \"red\" };\r\n\r\n  if (notice.message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div style={toggleStyle}>{notice.message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = \"/api/persons\"\r\n\r\nconst getPersons =  () => {\r\n    return axios.get(baseUrl)\r\n    .then(res => res.data)\r\n};\r\n\r\nconst createPerson =  (newPerson) => {\r\n    return axios.post(baseUrl, newPerson)\r\n    .then(res => res.data)\r\n};\r\n\r\nconst updatePerson = (id, newPerson) => {\r\n    return axios\r\n      .put(`${baseUrl}/${id}`, newPerson)\r\n      .then( res => res.data);\r\n  };\r\n\r\n  const deletePerson = (id) => {\r\n    return axios\r\n      .delete(`${baseUrl}/${id}`)\r\n      //.then( res => res.data);\r\n  };\r\n\r\nexport {getPersons, createPerson, updatePerson, deletePerson}","import React, { useState, useEffect } from \"react\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport Notification from \"./components/Notification\";\nimport {\n  getPersons,\n  createPerson,\n  updatePerson,\n  deletePerson,\n} from \"./services/persons\";\n\nconst Header = ({ text }) =>\n  text === \"Phonebook\" ? <h2>{text}</h2> : <h3>{text}</h3>;\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [searchText, setSearchText] = useState(\"\");\n  const [notice, setNotice] = useState({ message: null });\n\n  useEffect(() => {\n    getPersons()\n      .then((initPersons) => {\n        setPersons(initPersons);\n        console.log(\"fetched persons\", initPersons);\n      })\n      .catch((e) => console.log(\"fetch error\", e.message));\n  }, []);\n\n  const capitalizeName = (str) => {\n    const cap = str\n      .trim()\n      .split(\" \")\n      .map((text) => text[0].toUpperCase() + text.slice(1))\n      .join(\" \");\n    return cap;\n  };\n\n  const notifyUser = (newValue) => {\n    setNotice(newValue);\n    setTimeout(() => {\n      setNotice({ ...notice, message: null });\n    }, 5000);\n  };\n\n  const errorHandler = (err) => {\n    console.log(\"error\", err.response.data);\n\n    const newNotice = {\n      ...notice,\n      message: err.response.data.error,\n      code: 0,\n    };\n\n    notifyUser(newNotice);\n  };\n\n  const addPerson = (e) => {\n    e.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n\n    const personByName = persons.find(\n      (p) => p.name.toLowerCase() === newPerson.name.toLowerCase()\n    );\n\n    const updateContactNumber = (id) => {\n      const changedNumber = { ...personByName, number: newNumber };\n\n      window.confirm(\n        `'${capitalizeName(\n          newName\n        )}' already exists in phonebook. Do you want to replace the old number with a new one?`\n      )\n        ? updatePerson(id, changedNumber)\n            .then((updatedContact) => {\n              setPersons(\n                persons.map((p) => (p.id !== id ? p : updatedContact))\n              );\n              setNewName(\"\");\n              setNewNumber(\"\");\n              const newNotice = {\n                ...notice,\n                message: `${capitalizeName(\n                  updatedContact.name\n                )}'s contact number changed successfully!`,\n                code: 1,\n              };\n              notifyUser(newNotice);\n              console.log(\"updated\", updatedContact);\n            })\n            .catch((err) => errorHandler(err))\n        : setNewName(\"\");\n    };\n\n    personByName\n      ? updateContactNumber(personByName.id)\n      : createPerson(newPerson)\n          .then((res) => {\n            setPersons(persons.concat(res));\n            setNewName(\"\");\n            setNewNumber(\"\");\n            const noticObject = {\n              ...notice,\n              message: `'${capitalizeName(\n                res.name\n              )}' successfully added to phonebook!`,\n              code: 1,\n            };\n            notifyUser(noticObject);\n            console.log(\"posted person\", res);\n          })\n          .catch((err) => errorHandler(err));\n  };\n\n  const handleDelete = (id) => () => {\n    const person = persons.find((p) => p.id === id);\n\n    window.confirm(`Delete ${capitalizeName(person.name)}?`)\n      ? deletePerson(id)\n          .then((res) => {\n            setPersons(persons.filter((p) => p.id !== person.id));\n            const newNotice = {\n              ...notice,\n              message: `${capitalizeName(person.name)} deleted successfully!`,\n              code: 1,\n            };\n            notifyUser(newNotice);\n            console.log(\n              \"delete status\",\n              `${res.statusText}  ${res.status} ${res.data}`\n            );\n          })\n          .catch((e) => {\n            const newNotice = {\n              ...notice,\n              message: `The contact '${person.name}' has already been removed from the server!`,\n              code: 0,\n            };\n            notifyUser(newNotice);\n            setPersons(persons.filter((p) => p.id !== person.id));\n            console.log(\"error\", e);\n          })\n      : console.log(\"delete request cancelled\");\n  };\n\n  const handleNameChange = (e) => {\n    console.log(\"newName\", e.target.value);\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => {\n    console.log(\"newNumber\", e.target.value);\n    setNewNumber(e.target.value);\n  };\n\n  const handleSearch = (e) => {\n    console.log(\"searchText\", e.target.value);\n    setSearchText(e.target.value);\n  };\n\n  const lstToDisplay =\n    searchText.length !== 0\n      ? persons.filter((p) =>\n          p.name.toLowerCase().includes(searchText.toLowerCase())\n        )\n      : persons;\n\n  const handlers = [\n    addPerson,\n    handleNameChange,\n    handleNumberChange,\n    newName,\n    newNumber,\n  ];\n\n  return (\n    <div>\n      <Header text=\"Phonebook\" />\n      <Notification notice={notice} />\n      <Filter searchText={searchText} handleSearch={handleSearch} />\n      <Header text=\"Add New Contact\" />\n      <PersonForm handlers={handlers} />\n      <Header text=\"Numbers\" />\n      <Persons\n        lstToDisplay={lstToDisplay}\n        capitalizeName={capitalizeName}\n        handleDelete={handleDelete}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}