(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(14),r=n.n(o),l=n(1),u=n(3),i=function(e){var t=e.handlers,n=Object(u.a)(t,5),a=n[0],o=n[1],r=n[2],l=n[3],i=n[4];return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:a},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:l,onChange:o,required:!0})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:i,onChange:r,required:!0})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))},s=function(e){var t=e.name,n=e.number,a=e.capitalizeName,o=e.handleDelete;return c.a.createElement("div",null,a(t)," ",n,c.a.createElement("button",{onClick:o},"delete"))},m=function(e){var t=e.lstToDisplay,n=e.capitalizeName,a=e.handleDelete;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(s,{key:e.name,name:e.name,number:e.number,capitalizeName:n,handleDelete:a(e.id)})})))},d=function(e){var t=e.handleSearch,n=e.searchText;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,"Filter by name: ",c.a.createElement("input",{type:"search",value:n,onChange:t})))},f=function(e){var t=e.notice,n={color:"green",background:"lightgrey",fontSize:20,border:"solid",borderRadius:5,padding:10,marginBottom:10},a=t.code?n:Object(l.a)(Object(l.a)({},n),{},{color:"red"});return null===t.message?null:c.a.createElement("div",{style:a},t.message)},b=n(4),h=n.n(b),g="/api/persons",p=function(e){var t=e.text;return"Phonebook"===t?c.a.createElement("h2",null,t):c.a.createElement("h3",null,t)},v=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),s=Object(u.a)(r,2),b=s[0],v=s[1],j=Object(a.useState)(""),O=Object(u.a)(j,2),E=O[0],w=O[1],y=Object(a.useState)(""),k=Object(u.a)(y,2),x=k[0],C=k[1],S=Object(a.useState)({message:null}),D=Object(u.a)(S,2),N=D[0],T=D[1];Object(a.useEffect)((function(){h.a.get(g).then((function(e){return e.data})).then((function(e){o(e),console.log("fetched persons",e)})).catch((function(e){return console.log("fetch error",e.message)}))}),[]);var z=function(e){return e.trim().split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" ")},L=function(e){T(e),setTimeout((function(){T(Object(l.a)(Object(l.a)({},N),{},{message:null}))}),5e3)},q=0!==x.length?n.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())})):n,B=[function(e){e.preventDefault();var t={name:b,number:E},a=n.find((function(e){return e.name.toLowerCase()===t.name.toLowerCase()}));a?function(e){var t=Object(l.a)(Object(l.a)({},a),{},{number:E});window.confirm("'".concat(z(b),"' already exists in phonebook. Do you want to replace the old number with a new one?"))?function(e,t){return h.a.put("".concat(g,"/").concat(e),t).then((function(e){return e.data}))}(e,t).then((function(t){o(n.map((function(n){return n.id!==e?n:t}))),v(""),w("");var a=Object(l.a)(Object(l.a)({},N),{},{message:"".concat(z(t.name),"'s contact number changed successfully!"),code:1});L(a),console.log("updated",t)})).catch((function(e){var t=Object(l.a)(Object(l.a)({},N),{},{message:"'".concat(a.name,"'s' contact number was not modified!"),code:0});L(t),console.log("error updating contact",e)})):v("")}(a.id):function(e){return h.a.post(g,e).then((function(e){return e.data}))}(t).then((function(e){o(n.concat(e)),v(""),w("");var t=Object(l.a)(Object(l.a)({},N),{},{message:"'".concat(z(e.name),"' successfully added to phonebook!"),code:1});L(t),console.log("posted person",e)})).catch((function(e){var t=Object(l.a)(Object(l.a)({},N),{},{message:"Sorry '".concat(a.name,"' was not added to server!"),code:0});L(t),console.log("posting error",e)}))},function(e){console.log("newName",e.target.value),v(e.target.value)},function(e){console.log("newNumber",e.target.value),w(e.target.value)},b,E];return c.a.createElement("div",null,c.a.createElement(p,{text:"Phonebook"}),c.a.createElement(f,{notice:N}),c.a.createElement(d,{searchText:x,handleSearch:function(e){console.log("searchText",e.target.value),C(e.target.value)}}),c.a.createElement(p,{text:"Add New Contact"}),c.a.createElement(i,{handlers:B}),c.a.createElement(p,{text:"Numbers"}),c.a.createElement(m,{lstToDisplay:q,capitalizeName:z,handleDelete:function(e){return function(){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(z(t.name),"?"))?function(e){return h.a.delete("".concat(g,"/").concat(e))}(e).then((function(e){o(n.filter((function(e){return e.id!==t.id})));var a=Object(l.a)(Object(l.a)({},N),{},{message:"".concat(z(t.name)," deleted successfully!"),code:1});L(a),console.log("delete status","".concat(e.statusText,"  ").concat(e.status," ").concat(e.data))})).catch((function(e){var a=Object(l.a)(Object(l.a)({},N),{},{message:"The contact '".concat(t.name,"' has already been removed from the server!"),code:0});L(a),o(n.filter((function(e){return e.id!==t.id}))),console.log("error",e)})):console.log("delete request cancelled")}}}))};r.a.render(c.a.createElement(v,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.5a091959.chunk.js.map